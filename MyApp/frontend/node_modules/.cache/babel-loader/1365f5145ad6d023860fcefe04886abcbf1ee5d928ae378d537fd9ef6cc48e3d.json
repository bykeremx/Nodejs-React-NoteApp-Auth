{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useContext } from 'react';\nimport AuthContext from '../context/AuthContext';\nimport { data, useNavigate } from 'react-router';\nconst useAuth = () => {\n  _s();\n  const {\n    AuthState,\n    AuthDispatch\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const Login = async (email, password) => {\n    //giriş işlemi yapılacak\n    //token alınacak ve context'e yüklencek\n\n    try {\n      const LoginFetch = await fetch('http://localhost:8080/api/user/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!LoginFetch.ok) {\n        throw new Error('Kullanıcı adı veya şifre yanlış');\n      }\n      const data = await LoginFetch.json();\n      // her şey doğru ilerliyor ise \n      AuthDispatch({\n        type: 'LOGIN',\n        payload: {\n          token: data.token,\n          user: data.user\n        }\n      });\n      localStorage.setItem('token', data.token);\n      navigate('/');\n    } catch (error) {\n      console.log(data.mess);\n    }\n  };\n  return {\n    AuthState,\n    Login\n  };\n};\n_s(useAuth, \"1nH773hncnxrkjO2pCQYOvmUkA8=\", false, function () {\n  return [useNavigate];\n});\nexport default useAuth;","map":{"version":3,"names":["useContext","AuthContext","data","useNavigate","useAuth","_s","AuthState","AuthDispatch","navigate","Login","email","password","LoginFetch","fetch","method","headers","body","JSON","stringify","ok","Error","json","type","payload","token","user","localStorage","setItem","error","console","log","mess"],"sources":["C:/Users/mkere/Desktop/Mern-Stack-Uygulamaları/notUygulaması/frontend/src/hooks/useAuth.jsx"],"sourcesContent":["import {useContext} from 'react';\r\nimport AuthContext from '../context/AuthContext'\r\nimport { data, useNavigate } from 'react-router';\r\n\r\n\r\n\r\nconst useAuth = () => {\r\n    const {\r\n        AuthState,AuthDispatch\r\n    } = useContext(AuthContext);\r\n    const navigate = useNavigate();\r\n\r\n\r\n    const Login= async (email,password)=>{\r\n        //giriş işlemi yapılacak\r\n        //token alınacak ve context'e yüklencek\r\n\r\n        try {\r\n            const LoginFetch = await fetch('http://localhost:8080/api/user/login',{\r\n                method:'POST',\r\n                headers:{\r\n                    'Content-Type':'application/json'\r\n                },\r\n                body:JSON.stringify({\r\n                    email,\r\n                    password\r\n                })\r\n            });\r\n            if(!LoginFetch.ok){\r\n                throw new Error('Kullanıcı adı veya şifre yanlış');\r\n            }\r\n            const data = await LoginFetch.json();\r\n            // her şey doğru ilerliyor ise \r\n            AuthDispatch({\r\n                type:'LOGIN',\r\n                payload:{\r\n                    token:data.token,\r\n                    user:data.user\r\n                }\r\n            });\r\n            localStorage.setItem('token',data.token);\r\n            navigate('/');\r\n\r\n\r\n\r\n        } catch (error) {\r\n\r\n            console.log(data.mess);\r\n            \r\n        }\r\n\r\n    }\r\n\r\n    return {\r\n        AuthState,\r\n        Login\r\n    }\r\n}\r\n\r\n\r\nexport default useAuth;"],"mappings":";AAAA,SAAQA,UAAU,QAAO,OAAO;AAChC,OAAOC,WAAW,MAAM,wBAAwB;AAChD,SAASC,IAAI,EAAEC,WAAW,QAAQ,cAAc;AAIhD,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClB,MAAM;IACFC,SAAS;IAACC;EACd,CAAC,GAAGP,UAAU,CAACC,WAAW,CAAC;EAC3B,MAAMO,QAAQ,GAAGL,WAAW,CAAC,CAAC;EAG9B,MAAMM,KAAK,GAAE,MAAAA,CAAOC,KAAK,EAACC,QAAQ,KAAG;IACjC;IACA;;IAEA,IAAI;MACA,MAAMC,UAAU,GAAG,MAAMC,KAAK,CAAC,sCAAsC,EAAC;QAClEC,MAAM,EAAC,MAAM;QACbC,OAAO,EAAC;UACJ,cAAc,EAAC;QACnB,CAAC;QACDC,IAAI,EAACC,IAAI,CAACC,SAAS,CAAC;UAChBR,KAAK;UACLC;QACJ,CAAC;MACL,CAAC,CAAC;MACF,IAAG,CAACC,UAAU,CAACO,EAAE,EAAC;QACd,MAAM,IAAIC,KAAK,CAAC,iCAAiC,CAAC;MACtD;MACA,MAAMlB,IAAI,GAAG,MAAMU,UAAU,CAACS,IAAI,CAAC,CAAC;MACpC;MACAd,YAAY,CAAC;QACTe,IAAI,EAAC,OAAO;QACZC,OAAO,EAAC;UACJC,KAAK,EAACtB,IAAI,CAACsB,KAAK;UAChBC,IAAI,EAACvB,IAAI,CAACuB;QACd;MACJ,CAAC,CAAC;MACFC,YAAY,CAACC,OAAO,CAAC,OAAO,EAACzB,IAAI,CAACsB,KAAK,CAAC;MACxChB,QAAQ,CAAC,GAAG,CAAC;IAIjB,CAAC,CAAC,OAAOoB,KAAK,EAAE;MAEZC,OAAO,CAACC,GAAG,CAAC5B,IAAI,CAAC6B,IAAI,CAAC;IAE1B;EAEJ,CAAC;EAED,OAAO;IACHzB,SAAS;IACTG;EACJ,CAAC;AACL,CAAC;AAAAJ,EAAA,CAnDKD,OAAO;EAAA,QAIQD,WAAW;AAAA;AAkDhC,eAAeC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}